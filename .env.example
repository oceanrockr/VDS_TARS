# T.A.R.S. Environment Configuration
# Copy this file to .env and configure with your settings
# Version: v0.1.0-alpha

# ==============================================================================
# INFRASTRUCTURE SETTINGS
# ==============================================================================

# Host Configuration
HOST_IP=192.168.0.11
NAS_IP=192.168.0.10
LOCAL_DOMAIN=llm.local
NAS_DOMAIN=nas.local

# Network Ports
BACKEND_PORT=8000
OLLAMA_PORT=11434
CHROMADB_PORT=8001
UI_PORT=3000

# ==============================================================================
# BACKEND SERVICE
# ==============================================================================

# FastAPI Configuration
FASTAPI_ENV=development
FASTAPI_DEBUG=true
FASTAPI_RELOAD=true
API_V1_PREFIX=/api/v1
CORS_ORIGINS=http://localhost:3000,http://llm.local:3000

# Logging
LOG_LEVEL=INFO
LOG_FORMAT=json

# ==============================================================================
# OLLAMA LLM SERVICE
# ==============================================================================

# Ollama Configuration
OLLAMA_HOST=http://ollama:11434
OLLAMA_MODEL=mistral:7b-instruct
OLLAMA_GPU_LAYERS=-1
OLLAMA_NUM_THREAD=8
OLLAMA_CONTEXT_LENGTH=8192

# Model Parameters
MODEL_TEMPERATURE=0.7
MODEL_TOP_P=0.9
MODEL_TOP_K=40
MODEL_MAX_TOKENS=2048

# ==============================================================================
# CHROMADB VECTOR DATABASE
# ==============================================================================

# ChromaDB Configuration
CHROMA_HOST=http://chromadb:8001
CHROMA_PERSIST_DIRECTORY=/data/chroma
CHROMA_COLLECTION_NAME=tars_documents

# Embedding Model
EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
EMBEDDING_DIMENSION=384
CHUNK_SIZE=512
CHUNK_OVERLAP=50

# ==============================================================================
# NAS AND STORAGE
# ==============================================================================

# NAS Mount Configuration
NAS_PROTOCOL=nfs
NAS_SHARE_PATH=/volume1/LLM_docs
NAS_MOUNT_POINT=/mnt/nas
NAS_USERNAME=tars_service
NAS_PASSWORD=

# Document Indexing
WATCH_DIRECTORIES=/mnt/nas/LLM_docs
SUPPORTED_EXTENSIONS=.pdf,.docx,.txt,.md,.csv
MAX_FILE_SIZE_MB=100
INDEXING_BATCH_SIZE=100

# ==============================================================================
# AUTHENTICATION & SECURITY
# ==============================================================================

# JWT Configuration
JWT_SECRET_KEY=your-secret-key-change-this-in-production
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24
JWT_REFRESH_EXPIRATION_DAYS=7

# Security
HTTPS_ENABLED=false
TLS_CERT_PATH=/etc/ssl/certs/tars.crt
TLS_KEY_PATH=/etc/ssl/private/tars.key
RATE_LIMIT_PER_MINUTE=60

# ==============================================================================
# WEBSOCKET CONFIGURATION
# ==============================================================================

# WebSocket Settings
WS_HEARTBEAT_INTERVAL=30
WS_MAX_CONNECTIONS=10
WS_MESSAGE_QUEUE_SIZE=100
WS_TIMEOUT_SECONDS=300

# ==============================================================================
# RAG CONFIGURATION (Phase 3)
# ==============================================================================

# ChromaDB Settings
CHROMA_COLLECTION_NAME=tars_documents
CHROMA_CONVERSATION_COLLECTION=tars_conversations
CHROMA_DISTANCE_METRIC=cosine
CHROMA_MAX_BATCH_SIZE=100

# Embedding Settings
EMBED_MODEL=sentence-transformers/all-MiniLM-L6-v2
EMBED_DIMENSION=384
EMBED_BATCH_SIZE=32
EMBED_DEVICE=cuda
EMBED_MAX_SEQ_LENGTH=256

# Document Processing
CHUNK_SIZE=512
CHUNK_OVERLAP=50
MAX_FILE_SIZE_MB=50
ALLOWED_EXTENSIONS=.pdf,.docx,.txt,.md,.csv
ENABLE_OCR=false

# Retrieval Settings
RAG_TOP_K=5
RAG_RELEVANCE_THRESHOLD=0.7
RAG_RERANK_ENABLED=true
RAG_INCLUDE_SOURCES=true
RAG_MAX_CONTEXT_TOKENS=2048

# NAS Configuration (Phase 4)
NAS_MOUNT_POINT=/mnt/nas/LLM_docs
NAS_WATCH_ENABLED=false
NAS_SCAN_INTERVAL=3600

# ==============================================================================
# PHASE 5: ADVANCED RAG CONFIGURATION
# ==============================================================================

# Semantic Chunking
USE_SEMANTIC_CHUNKING=true
SEMANTIC_CHUNK_MIN=400
SEMANTIC_CHUNK_MAX=800

# Advanced Reranking
USE_ADVANCED_RERANKING=true
RERANK_MODEL=cross-encoder/ms-marco-MiniLM-L-6-v2
RERANK_TOP_K=10
RERANK_WEIGHT=0.35

# Hybrid Search (BM25 + Vector)
USE_HYBRID_SEARCH=true
HYBRID_ALPHA=0.3

# Query Expansion (disabled by default - adds latency)
USE_QUERY_EXPANSION=false
QUERY_EXPANSION_ENABLED=false
QUERY_EXPANSION_MAX=3

# Analytics
ANALYTICS_ENABLED=true
ANALYTICS_LOG_PATH=./logs/analytics.log

# ==============================================================================
# MONITORING & OBSERVABILITY
# ==============================================================================

# Metrics
ENABLE_METRICS=true
METRICS_PORT=9090
METRICS_PATH=/metrics

# Health Checks
HEALTH_CHECK_INTERVAL=30
READINESS_CHECK_TIMEOUT=5

# ==============================================================================
# DEVELOPMENT & DEBUGGING
# ==============================================================================

# Debug Settings
DEBUG_MODE=false
VERBOSE_LOGGING=false
PROFILE_REQUESTS=false

# Testing
TEST_MODE=false
MOCK_OLLAMA=false
MOCK_CHROMADB=false

# ==============================================================================
# BACKUP & RECOVERY
# ==============================================================================

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 */6 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_DESTINATION=/mnt/nas/backups/tars

# ==============================================================================
# ADVANCED SETTINGS
# ==============================================================================

# Performance Tuning
MAX_CONCURRENT_REQUESTS=10
REQUEST_TIMEOUT_SECONDS=120
DB_POOL_SIZE=10
CACHE_TTL_SECONDS=3600

# Docker Configuration
COMPOSE_PROJECT_NAME=tars
DOCKER_BUILDKIT=1
